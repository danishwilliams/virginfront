<!DOCTYPE html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
</head>

<body>



<script type='text/javascript'>//<![CDATA[ 

  var newBaseUrl = "";
  if (window.location.hostname === "localhost") {
    newBaseUrl = "http://localhost:8000/";
  } else {
    newBaseUrl = window.location.origin + '/';
  }

/*

@see https://msdn.microsoft.com/en-us/library/gg589529(v=vs.85).aspx

Note  If you are developing on an intranet and have rendering issues for HTML5, you can add <meta http-equiv="X-UA-Compatible" content="IE=edge"/> to the <head> block of a webpage to force Internet Explorer to use the latest standards. If you prefer, configure your web development server to send a meta http-equiv="X-UA-Compatible" header with IE=edge instead. For more information about document compatibility, see Defining Document Compatibility.

*/

  /*

  iOS 5 - has limitations with the audio tag
  iOS 6 - introduced support for web audio API


  var self = this;

  self.audio = new Audio(); // An audio object for playing a track
  // Without these, Safari hates us
  
  self.audio.preload = "auto";
  self.audio.controls = true;
  //self.audio.autoplay = "true";
  //self.audio.type = "audio/mpeg";
  self.audio.src = "http://localhost:8000/moments.mp3";
  //self.audio.currentTime = track.currentTime;
  //self.audio.play();
  console.log(self.audio);
  //document.write(self.audio);
  */


  function play1() {
    var audio1 = document.getElementById('audio1');
    try {
      audio1.play();
      console.log('playing 1!');
      console.log('muted?', audio1.muted);
    }
    catch (e) {
      if(window.console && console.error("Error:" + e));
    }
  }

  function pause1() {
   try {
     var audio1 = document.getElementById('audio1');
     audio1.pause();
     console.log('pausing 1!');
   }
   catch (e) {
     if(window.console && console.error("Error:" + e));
   }
  }

  var audio2 = new Audio();

  function play2() {
    try {
      audio2.preload = "auto";
      audio2.src = newBaseUrl + "moments.mp3";
      audio2.load();
      audio2.play();
      console.log('playing 2!');      
    }
    catch (e) {
      if(window.console && console.error("Error:" + e));
    }
  }

  function pause2() {
    try {
      audio2.pause();
      console.log('pausing 2!');
    }
    catch (e) {
      if(window.console && console.error("Error:" + e));
    }
  }

  function play3() {
    try {
      audio2.src = newBaseUrl + "song.mp3";
      audio2.load();
      audio2.play();
      console.log('playing 3!');      
    }
    catch (e) {
      if(window.console && console.error("Error:" + e));
    }
  }

//]]>
</script>

<h3>Basic audio playback</h3>

  <p>Uses the audio tag.</p>
  <audio src="moments.mp3" controls></audio>

  <!-- IE 11: plays after a few seconds -->  

<!--
<h3>Audio playback with preload and autoplay attributes</h3>

  <audio preload="auto" autoplay="false" src="http://localhost:8000/moments.mp3" controls></audio>
-->

<!--
<h3>Audio tag with a source tag</h3>

  <audio preload controls>
    <source src="moments.mp3">
  </audio>

-->
  <!-- IE 11: preloaded the track and plays immediately -->

<h3>Javascript-controlled audio playback (with audio tag)</h3>

  <p>Uses the audio tag.</p>
  <button id="play1" onclick="play1()">Play</button> <button id="pause1" onclick="pause1()">Pause</button>
  <audio id="audio1" src="moments.mp3"></audio>

  <!-- IE 11: started playing after 4 seconds -->

<h3>Javascript-only audio (no audio tag)</h3>

  <button id="play2" onclick="play2()">Play</button> <button id="pause2" onclick="pause2()">Pause</button>

  <!-- IE 11: started playing after 11 seconds -->

<h3>Play a different song</h3>

  <button id="play3" onclick="play3()">Play</button> <button id="pause2" onclick="pause2()">Pause</button>


</body>
</html>