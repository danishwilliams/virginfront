<div id="login" class="row">
  <div class="small-17 small-centered medium-12 medium-centered large-8 large-centered columns">
    <span class="container" ng-show="login.step === 'login'">
    <h1>{{'LOGIN_TITLE' | translate}}</h1>

    <form name="form" novalidate ng-submit="login.login()">
      <div class="row">
        <div ng-messages="login.error">
          <p class="error" ng-message="error">{{'LOGIN_ERROR' | translate}}</p>
        </div>

        <input type="text" name="username" placeholder="{{'EMAIL' | translate}}" ng-model="login.credentials.username" required />
        <div ng-show="form.$submitted || form.username.$touched">
          <small class="error" ng-show="form.username.$error.required">{{'EMAIL_REQ' | translate}}</small>
        </div>

        <input type="password" name="password" placeholder="{{'PASSWORD' | translate}}" ng-model="login.credentials.password" required />
        <div ng-show="form.$submitted || form.password.$touched">
          <small class="error" ng-show="form.password.$error.required">{{'PASSWORD_REQ' | translate}}</small>
        </div>
      </div>
      <div class="row">
        <div class="large-18 columns text-right">
          <spinner class="spinner" name="loginSpinner" show="false"></spinner>
          <a ng-click="login.step = 'forgot'">Forgot password</a>
          <input type="submit" value="{{'LOGIN' | translate}}" />
        </div>
      </div>
    </form>
    </span>

    <span class="container" ng-show="login.step === 'forgot'">
      <h1>Forgot password</h1>
      <form name="forgotForm" novalidate ng-submit="login.forgotPassword()">
        <div class="row">
          <input type="text" name="username" placeholder="{{'EMAIL' | translate}}" ng-model="login.credentials.username" required />
          <div ng-show="forgotForm.$submitted || forgotForm.username.$touched">
            <small class="error" ng-show="forgotForm.username.$error.required">{{'EMAIL_REQ' | translate}}</small>
            <small class="error" ng-show="login.emailNotFoundError">Email does not exist, sorry.</small>
            <small class="error" ng-show="login.forgotPasswordError">Password reset had an error, sorry.</small>
          </div>
        </div>
        <div class="row">
          <div class="large-18 columns text-right">
            <a ng-hide="login.forgotPasswordSubmit" ng-click="login.step = 'login'">Cancel</a>
            <input ng-disabled="login.forgotPasswordSubmit" type="submit" value="Send reset email" />
          </div>
        </div>
      </form>
    </span>

    <span class="container" ng-show="login.step === 'resetSuccess'">
      <h1>Password reset link emailed</h1>

      <p>Please check your email at <span class="email">{{login.credentials.username}}</span> for the password reset link.</p>
    </span>
  </div>
</div>
