<div id="login" class="row">

  <h1 class="site-heading" ng-show="login.step === 'forgot'">{{'OB_TITLE_APP' | translate}}</h1>

  <div class="small-17 small-centered medium-12 medium-centered large-8 large-centered columns">
    <span class="container" ng-show="login.step === 'login'">

    <h1><span class="welcome">Welcome to</span><br>{{'OB_TITLE_APP' | translate}}</h1>

    <form name="form" novalidate ng-submit="login.login()">
      <div ng-messages="login.error">
        <p class="error" ng-message="error">{{'LOGIN_ERROR' | translate}}</p>
      </div>

      <label for="username">{{'EMAIL' | translate}}</label>
      <input type="text" name="username" ng-model="login.credentials.username" required />
      <div ng-show="form.$submitted || form.username.$touched">
        <small class="error" ng-show="form.username.$error.required">{{'EMAIL_REQ' | translate}}</small>
      </div>

      <label for="password">{{'PASSWORD' | translate}}</label>
      <input type="password" name="password" ng-model="login.credentials.password" required />
      <div ng-show="form.$submitted || form.password.$touched">
        <small class="error" ng-show="form.password.$error.required">{{'PASSWORD_REQ' | translate}}</small>
      </div>

      <div class="row submit">
        <spinner class="spinner" name="loginSpinner" show="false"></spinner>
        <a class="secondary" ng-click="login.step = 'forgot'">Forgot your password?</a>
        <input type="submit" value="{{'LOGIN' | translate}}" />
      </div>
    </form>
    </span>

    <div class="container dark-block" ng-show="login.step === 'forgot'">
      <h2>Forgot password</h2>

      <p>Enter your email address and we'll send you a link to change your password.</p>

      <form name="forgotForm" novalidate ng-submit="login.forgotPassword()">
          <label for="username">{{'EMAIL' | translate}}</label>
          <input type="text" name="username" ng-model="login.credentials.username" required />
          <div ng-show="forgotForm.$submitted || forgotForm.username.$touched">
            <small class="error" ng-show="forgotForm.username.$error.required">{{'EMAIL_REQ' | translate}}</small>
            <small class="error" ng-show="login.emailNotFoundError">Email does not exist, sorry.</small>
            <small class="error" ng-show="login.forgotPasswordError">Password reset had an error, sorry.</small>
          </div>
        <div class="row submit">
            <a class="cancel" ng-hide="login.forgotPasswordSubmit" ng-click="login.step = 'login'">Cancel</a>
            <input ng-disabled="login.forgotPasswordSubmit" type="submit" value="Send reset email" />
        </div>
      </form>
    </div>

    <div class="container dark-block" ng-show="login.step === 'resetSuccess'">
      <h1>Password reset link emailed</h1>

      <p>Please check your email at <span class="email">{{login.credentials.username}}</span> for the password reset link.</p>
    </div>
  </div>
</div>
